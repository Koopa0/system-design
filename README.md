# System Design with Golang

> ä¸€å€‹ä½¿ç”¨ Golang å¯¦è¸çš„ç³»çµ±è¨­è¨ˆæ¡ˆä¾‹åº«ï¼Œæ¶µè“‹å¾åŸºç¤åˆ°é«˜ç´šçš„å„ç¨®å ´æ™¯

[![Go Version](https://img.shields.io/badge/Go-1.21+-00ADD8?style=flat&logo=go)](https://go.dev/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

## ğŸ“š å°ˆæ¡ˆç°¡ä»‹

é€™æ˜¯ä¸€å€‹**æ•™å­¸å°å‘**çš„ç³»çµ±è¨­è¨ˆå¯¦è¸å°ˆæ¡ˆï¼Œé€é Golang å¯¦ä½œç¶“å…¸çš„ç³»çµ±è¨­è¨ˆæ¡ˆä¾‹ã€‚æ¯å€‹æ¡ˆä¾‹éƒ½åŒ…å«ï¼š

- ğŸ“– **å®Œæ•´çš„ç³»çµ±è¨­è¨ˆæ–‡æª”**ï¼ˆå•é¡Œå®šç¾©ã€éœ€æ±‚åˆ†æã€æ¶æ§‹è¨­è¨ˆï¼‰
- ğŸ¯ **æ ¸å¿ƒæ¦‚å¿µè¬›è§£**ï¼ˆç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆã€æœ‰å“ªäº›æ¬Šè¡¡ï¼‰
- ğŸ’» **å¯é‹è¡Œçš„ä»£ç¢¼å¯¦ç¾**ï¼ˆè©³ç´°è¨»è§£ã€å–®å…ƒæ¸¬è©¦ï¼‰
- ğŸ“Š **æ¶æ§‹åœ–å’Œæµç¨‹åœ–**ï¼ˆMermaid åœ–è¡¨ï¼‰
- ğŸ” **æ“´å±•æ€§è¨è«–**ï¼ˆå¾ 1 åˆ° 100 è¬ç”¨æˆ¶çš„æ¼”é€²ï¼‰

### åƒè€ƒè³‡æ–™

æœ¬å°ˆæ¡ˆåƒè€ƒä»¥ä¸‹ç¶“å…¸è³‡æºï¼š
- [ByteByteGo](https://bytebytego.com/) - ç³»çµ±è¨­è¨ˆåœ–è§£
- [Grokking the System Design Interview](https://www.educative.io/courses/grokking-the-system-design-interview) - é¢è©¦æº–å‚™
- [Designing Data-Intensive Applications](https://dataintensive.net/) (DDIA) - æ·±åº¦ç†è«–

## ğŸ¯ å­¸ç¿’è·¯ç·šåœ–

### Phase 1: åŸºç¤çµ„ä»¶ (Foundation)
é€™äº›æ˜¯æ‰€æœ‰å¤§å‹ç³»çµ±çš„åŸºçŸ³

| ç·¨è™Ÿ | ç³»çµ± | æ ¸å¿ƒæ¦‚å¿µ | ç‹€æ…‹ | é›£åº¦ |
|------|------|----------|------|------|
| [01](./01-counter-service) | Counter Service | Redisã€é™ç´šæ©Ÿåˆ¶ã€æ‰¹é‡å„ªåŒ– | âœ… å·²å®Œæˆ | â­ï¸ |
| [02](./02-room-management) | Room Management | WebSocketã€ç‹€æ…‹æ©Ÿã€ä¸¦ç™¼æ§åˆ¶ | âœ… å·²å®Œæˆ | â­ï¸â­ï¸ |
| [03](./03-url-shortener) | URL Shortener | IDç”Ÿæˆã€Base62ã€å¿«å–ç­–ç•¥ | ğŸš§ é€²è¡Œä¸­ | â­ï¸ |
| 04 | Rate Limiter | é™æµç®—æ³•ã€åˆ†å¸ƒå¼é™æµ | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸ |
| 05 | Distributed Cache | LRUã€ä¸€è‡´æ€§å“ˆå¸Œ | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸ |

### Phase 2: æ•¸æ“šå¯†é›†å‹ (Data-Intensive)
è™•ç†å¤§é‡æ•¸æ“šçš„ç³»çµ±

| ç·¨è™Ÿ | ç³»çµ± | æ ¸å¿ƒæ¦‚å¿µ | ç‹€æ…‹ | é›£åº¦ |
|------|------|----------|------|------|
| 10 | Search Autocomplete | Trieã€å‰ç¶´åŒ¹é…ã€Elasticsearch | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸ |
| 11 | Web Crawler | åˆ†å¸ƒå¼çˆ¬èŸ²ã€å»é‡ã€URL Frontier | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸â­ï¸ |
| 12 | Metrics Monitoring | æ™‚åºæ•¸æ“šã€èšåˆã€Prometheus | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸â­ï¸ |

### Phase 3: ç¤¾äº¤åª’é«” (Social Media)
é«˜ä¸¦ç™¼ã€é«˜å¯ç”¨çš„ç¤¾äº¤ç³»çµ±

| ç·¨è™Ÿ | ç³»çµ± | æ ¸å¿ƒæ¦‚å¿µ | ç‹€æ…‹ | é›£åº¦ |
|------|------|----------|------|------|
| 20 | News Feed | Feedç”Ÿæˆã€æ¨æ‹‰æ¨¡å‹ã€Fanout | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸â­ï¸ |
| 21 | Chat System | 1å°1ã€ç¾¤èŠã€é›¢ç·šè¨Šæ¯ | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸â­ï¸ |
| 22 | Notification Service | å¤šæ¸ é“æ¨é€ã€è¨‚é–±ã€å»é‡ | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸ |

### Phase 4: åª’é«”å¹³å° (Media Platforms)
è™•ç†å¤§æ–‡ä»¶å’Œä¸²æµ

| ç·¨è™Ÿ | ç³»çµ± | æ ¸å¿ƒæ¦‚å¿µ | ç‹€æ…‹ | é›£åº¦ |
|------|------|----------|------|------|
| 30 | YouTube | å½±ç‰‡ä¸Šå‚³ã€è½‰ç¢¼ã€CDN | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸â­ï¸â­ï¸ |
| 31 | Netflix | ä¸²æµã€è‡ªé©æ‡‰ç¢¼ç‡ | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸â­ï¸â­ï¸ |

### Phase 5: é›»å•†äº¤æ˜“ (E-Commerce)
é«˜ä¸¦ç™¼äº¤æ˜“ã€åº«å­˜ç®¡ç†

| ç·¨è™Ÿ | ç³»çµ± | æ ¸å¿ƒæ¦‚å¿µ | ç‹€æ…‹ | é›£åº¦ |
|------|------|----------|------|------|
| 50 | Flash Sale | åº«å­˜æ‰£æ¸›ã€è¶…è³£å•é¡Œ | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸â­ï¸â­ï¸ |
| 51 | Payment System | é›™å¯«ã€å†ªç­‰æ€§ã€å°å¸³ | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸â­ï¸â­ï¸ |

### Phase 6: AI å¹³å° (AI Platforms) ğŸ”¥
æ–°èˆˆçš„ AI ç³»çµ±è¨­è¨ˆ

| ç·¨è™Ÿ | ç³»çµ± | æ ¸å¿ƒæ¦‚å¿µ | ç‹€æ…‹ | é›£åº¦ |
|------|------|----------|------|------|
| 60 | ChatGPT-like System | LLM APIã€æµå¼è¼¸å‡º | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸â­ï¸â­ï¸ |
| 61 | AI Agent Platform | Agentç·¨æ’ã€Tool Calling | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ |
| 62 | RAG System | å‘é‡æ•¸æ“šåº«ã€Embedding | ğŸ“‹ è¨ˆåŠƒä¸­ | â­ï¸â­ï¸â­ï¸â­ï¸ |

å®Œæ•´è·¯ç·šåœ–è«‹åƒè€ƒ [ROADMAP.md](./ROADMAP.md)

## ğŸ› ï¸ æŠ€è¡“æ£§

### æ ¸å¿ƒæŠ€è¡“
- **èªè¨€**: Go 1.21+
- **Webæ¡†æ¶**: æ¨™æº–åº« `net/http`ï¼ˆéƒ¨åˆ†ä½¿ç”¨ Ginï¼‰
- **æ•¸æ“šåº«**: PostgreSQL, Redis
- **æ¶ˆæ¯éšŠåˆ—**: Kafka, RabbitMQï¼ˆä¾å°ˆæ¡ˆéœ€æ±‚ï¼‰
- **ç›£æ§**: Prometheus, Grafana
- **å®¹å™¨åŒ–**: Docker, Docker Compose

### æŠ€è¡“æ£§æ˜ å°„è¡¨

| æŠ€è¡“ | ä½¿ç”¨æ¡ˆä¾‹ |
|------|---------|
| **Redis** | 01-Counter, 03-URL-Shortener, 04-Rate-Limiter, 05-Cache |
| **PostgreSQL** | 01-Counter, 02-Room, 03-URL-Shortener, 20-News-Feed |
| **WebSocket** | 02-Room, 21-Chat, 60-ChatGPT |
| **Kafka** | 22-Notification, 30-YouTube, 50-Flash-Sale |
| **Elasticsearch** | 10-Search-Autocomplete, 11-Web-Crawler |
| **gRPC** | å¾®æœå‹™é€šè¨Šï¼ˆå¤šå€‹å°ˆæ¡ˆï¼‰ |

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ç’°å¢ƒéœ€æ±‚

```bash
# Go ç‰ˆæœ¬
go version  # éœ€è¦ 1.21+

# Dockerï¼ˆç”¨æ–¼é‹è¡Œä¾è³´æœå‹™ï¼‰
docker --version
docker-compose --version
```

### é‹è¡ŒæŸå€‹å°ˆæ¡ˆ

ä»¥ `01-counter-service` ç‚ºä¾‹ï¼š

```bash
# 1. é€²å…¥å°ˆæ¡ˆç›®éŒ„
cd 01-counter-service

# 2. å•Ÿå‹•ä¾è³´æœå‹™ï¼ˆRedis + PostgreSQLï¼‰
docker-compose up -d

# 3. é‹è¡Œæ•¸æ“šåº«é·ç§»
make migrate-up

# 4. å•Ÿå‹•æœå‹™
go run cmd/server/main.go

# 5. æ¸¬è©¦ API
curl http://localhost:8080/api/v1/counter/online_players/increment
```

æ¯å€‹å°ˆæ¡ˆéƒ½æœ‰ç¨ç«‹çš„ READMEï¼ŒåŒ…å«è©³ç´°çš„é‹è¡Œèªªæ˜ã€‚

## ğŸ“– å¦‚ä½•ä½¿ç”¨æœ¬å°ˆæ¡ˆ

### å­¸ç¿’æ–¹å¼å»ºè­°

1. **é–±è®€ README.md**
   äº†è§£å•é¡ŒèƒŒæ™¯ã€éœ€æ±‚åˆ†æã€æ¶æ§‹è¨­è¨ˆ

2. **ç ”è®€ LEARNING.md**
   å­¸ç¿’æ ¸å¿ƒæ¦‚å¿µã€æŠ€è¡“é¸å‹ã€æ¬Šè¡¡å–æ¨

3. **é‹è¡Œä»£ç¢¼**
   æœ¬åœ°å•Ÿå‹•æœå‹™ï¼Œå¯¦éš›é«”é©—ç³»çµ±è¡Œç‚º

4. **é–±è®€æºç¢¼**
   æ¯å€‹æ–‡ä»¶éƒ½æœ‰è©³ç´°è¨»è§£ï¼Œç†è§£å¯¦ç¾ç´°ç¯€

5. **é‹è¡Œæ¸¬è©¦**
   å–®å…ƒæ¸¬è©¦ã€é›†æˆæ¸¬è©¦ã€å£“åŠ›æ¸¬è©¦

6. **æ“´å±•ç·´ç¿’**
   å˜—è©¦å¯¦ç¾æ–‡æª”ä¸­çš„ã€Œæ“´å±•æ€è€ƒã€å•é¡Œ

### é¢è©¦æº–å‚™

å¦‚æœä½ æ­£åœ¨æº–å‚™ç³»çµ±è¨­è¨ˆé¢è©¦ï¼š

1. **æŒ‰é †åºå­¸ç¿’**ï¼šå¾ Phase 1 çš„åŸºç¤çµ„ä»¶é–‹å§‹
2. **ç†è§£ Trade-offs**ï¼šæ¯å€‹è¨­è¨ˆæ±ºç­–èƒŒå¾Œçš„åŸå› 
3. **ç·´ç¿’ç•«åœ–**ï¼šèƒ½å¤ å¿«é€Ÿç•«å‡ºæ¶æ§‹åœ–
4. **ä¼°ç®—å®¹é‡**ï¼šç·´ç¿’ Back-of-the-envelope è¨ˆç®—
5. **è¨è«–æ“´å±•æ€§**ï¼šå¾å°è¦æ¨¡åˆ°å¤§è¦æ¨¡çš„æ¼”é€²

## ğŸ“‚ å°ˆæ¡ˆçµæ§‹

æ¯å€‹ç³»çµ±è¨­è¨ˆæ¡ˆä¾‹çš„æ¨™æº–çµæ§‹ï¼š

```
XX-system-name/
â”œâ”€â”€ README.md                  # ç³»çµ±è¨­è¨ˆæ–‡æª”
â”œâ”€â”€ LEARNING.md                # å­¸ç¿’è¦é»å’Œæ ¸å¿ƒæ¦‚å¿µ
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ requirements.md        # è©³ç´°éœ€æ±‚åˆ†æ
â”‚   â”œâ”€â”€ architecture.md        # æ¶æ§‹è¨­è¨ˆæ–‡æª”
â”‚   â”œâ”€â”€ api.md                 # API è¦æ ¼
â”‚   â”œâ”€â”€ scaling.md             # æ“´å±•æ€§è¨è«–
â”‚   â””â”€â”€ diagrams/              # Mermaid åœ–è¡¨
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go            # æœå‹™å…¥å£
â”œâ”€â”€ internal/                  # æ¥­å‹™é‚è¼¯ï¼ˆè©³ç´°è¨»è§£ï¼‰
â”œâ”€â”€ pkg/                       # å¯å¾©ç”¨çš„åŒ…
â”œâ”€â”€ docker-compose.yml         # ä¾è³´æœå‹™
â”œâ”€â”€ Makefile                   # å¸¸ç”¨å‘½ä»¤
â””â”€â”€ go.mod
```

## ğŸ¤ è²¢ç»æŒ‡å—

é€™æ˜¯ä¸€å€‹é–‹æºå­¸ç¿’å°ˆæ¡ˆï¼Œæ­¡è¿è²¢ç»ï¼

- ğŸ’¡ æäº¤æ–°çš„ç³»çµ±è¨­è¨ˆæ¡ˆä¾‹
- ğŸ› ä¿®å¾© Bug æˆ–æ”¹é€²ä»£ç¢¼
- ğŸ“ æ”¹é€²æ–‡æª”æˆ–ç¿»è­¯
- â­ï¸ Star æœ¬å°ˆæ¡ˆï¼Œè®“æ›´å¤šäººçœ‹åˆ°

è«‹åƒè€ƒ [CONTRIBUTING.md](./CONTRIBUTING.md)ï¼ˆå¾…è£œå……ï¼‰

## ğŸ“š æ¨è–¦è³‡æº

### æ›¸ç±
- ğŸ“˜ [Designing Data-Intensive Applications](https://dataintensive.net/) - Martin Kleppmann
- ğŸ“— [System Design Interview Vol 1 & 2](https://bytebytego.com/) - Alex Xu

### ç·šä¸Šèª²ç¨‹
- ğŸ“ [Grokking the System Design Interview](https://www.educative.io/courses/grokking-the-system-design-interview)
- ğŸ“ [Grokking the Advanced System Design Interview](https://www.educative.io/courses/grokking-adv-system-design-intvw)

### ç¶²ç«™å’Œéƒ¨è½æ ¼
- ğŸŒ [ByteByteGo Newsletter](https://blog.bytebytego.com/)
- ğŸŒ [High Scalability](http://highscalability.com/)
- ğŸŒ [System Design Primer](https://github.com/donnemartin/system-design-primer)

## ğŸ“Š é€²åº¦è¿½è¹¤

- âœ… **å·²å®Œæˆ**: 2 å€‹æ¡ˆä¾‹
- ğŸš§ **é€²è¡Œä¸­**: 1 å€‹æ¡ˆä¾‹
- ğŸ“‹ **è¨ˆåŠƒä¸­**: 20+ å€‹æ¡ˆä¾‹

æŸ¥çœ‹ [ROADMAP.md](./ROADMAP.md) äº†è§£å®Œæ•´è¨ˆåŠƒã€‚

## ğŸ“ License

MIT License - è©³è¦‹ [LICENSE](./LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è¬

æ„Ÿè¬æ‰€æœ‰æä¾›éˆæ„Ÿçš„é–‹æºå°ˆæ¡ˆå’ŒæŠ€è¡“ç¤¾ç¾¤ã€‚

---

**â­ï¸ å¦‚æœé€™å€‹å°ˆæ¡ˆå°ä½ æœ‰å¹«åŠ©ï¼Œè«‹çµ¦å€‹ Starï¼**

**ğŸ“§ æœ‰å•é¡Œæˆ–å»ºè­°ï¼Ÿæ­¡è¿é–‹ Issue è¨è«–ï¼**
